---
- hosts: peppol
  roles:
    - load-tests
  vars:
    file: /peppol/data/storage/performance-tests/large-file/large-file-100MB.xml
    etalon: 500
    module: Validator
    msg_count: 98
    msg_type: large
    wait_time: 200
    load_tests_first_rabbit: '{"version":1.1,"processingInfo":{"source":{"name":"transport-from-a2a","type":"OUT_FILE_TO_MQ"},"sourceMetadata":"Received by transport-from-a2a as /peppol-a2a-nfs/out/test/data/large-file-100MB.xml","route":{"endpoints":["validator","outbound","outbound:exchange=peppol-delayed,x-delay=30000","outbound:exchange=peppol-delayed,x-delay=30000"],"description":"A2A to Peppol","source":"transport-from-a2a","current":1},"currentEndpoint":{"name":"internal-routing","type":"OUT_ROUTING"},"currentStatus":"route set","attemptId":0,"eventingMessage":{"id":"OUT_large-file-100MB_transport-from-a2a","created":1518104313955,"isInbound":false,"attempts":[{"id":"1518104313955_large-file-100MB.xml","events":[{"id":1518104313955,"source":"transport-from-a2a","status":"received","terminal":false,"details":"Picked up file by transport"},{"id":1518104315575,"source":"preprocessing","status":"parsed","terminal":false,"details":"Preprocessing complete, sent to internal-routing"},{"id":1518104315666,"source":"internal-routing","status":"route set","terminal":false,"details":"Route set, sent to validator"}],"filename":"/peppol/data/storage/9908_987987987/9908_987987987/20180208/large-file-100MB.xml"}],"documentType":"Invoice","documentNumber":"2157563","documentDate":"2016-11-03","dueDate":"2016-12-03"}},"fileName":"{{ first_filename }}","originalFileName":"large-file-100MB","documentInfo":{"errors":[],"warnings":[],"senderId":"9908:987987987","recipientId":"9908:987987987","versionId":"2.1","documentId":"2157563","issueDate":"2016-11-03","issueTime":"","dueDate":"2016-12-03","senderName":"OpusCapita test","senderCountryCode":"NO","recipientName":"OpusCapita test","recipientCountryCode":"NO","profileId":"urn:www.cenbii.eu:profile:bii05:ver2.0","customizationId":"urn:www.cenbii.eu:transaction:biitrns010:ver2.0:extended:urn:www.peppol.eu:bis:peppol5a:ver2.0","rootNameSpace":"urn:oasis:names:specification:ubl:schema:xsd:Invoice-2","rootNodeName":"Invoice","archetype":"PEPPOL_BIS","documentType":"Invoice","documentBusinessIdentifier":"c4c937fc-a276-11e6-ab58-3b2f2bf0b8e7"}}' 
    load_tests_middle_rabbit: '{"version":1.1,"processingInfo":{"source":{"name":"transport-from-a2a","type":"OUT_FILE_TO_MQ"},"sourceMetadata":"Received by transport-from-a2a as /peppol-a2a-nfs/out/test/data/large-file-100MB.xml","route":{"endpoints":["validator","outbound","outbound:exchange=peppol-delayed,x-delay=30000","outbound:exchange=peppol-delayed,x-delay=30000"],"description":"A2A to Peppol","source":"transport-from-a2a","current":1},"currentEndpoint":{"name":"internal-routing","type":"OUT_ROUTING"},"currentStatus":"route set","attemptId":0,"eventingMessage":{"id":"OUT_large-file-100MB_transport-from-a2a","created":1518104313955,"isInbound":false,"attempts":[{"id":"1518104313955_large-file-100MB.xml","events":[{"id":1518104313955,"source":"transport-from-a2a","status":"received","terminal":false,"details":"Picked up file by transport"},{"id":1518104315575,"source":"preprocessing","status":"parsed","terminal":false,"details":"Preprocessing complete, sent to internal-routing"},{"id":1518104315666,"source":"internal-routing","status":"route set","terminal":false,"details":"Route set, sent to validator"}],"filename":"/peppol/data/storage/9908_987987987/9908_987987987/20180208/large-file-100MB.xml"}],"documentType":"Invoice","documentNumber":"2157563","documentDate":"2016-11-03","dueDate":"2016-12-03"}},"fileName":"/peppol/data/storage/performance-tests/large-file/large-file-100MB.xml","originalFileName":"large-file-100MB","documentInfo":{"errors":[],"warnings":[],"senderId":"9908:987987987","recipientId":"9908:987987987","versionId":"2.1","documentId":"2157563","issueDate":"2016-11-03","issueTime":"","dueDate":"2016-12-03","senderName":"OpusCapita test","senderCountryCode":"NO","recipientName":"OpusCapita test","recipientCountryCode":"NO","profileId":"urn:www.cenbii.eu:profile:bii05:ver2.0","customizationId":"urn:www.cenbii.eu:transaction:biitrns010:ver2.0:extended:urn:www.peppol.eu:bis:peppol5a:ver2.0","rootNameSpace":"urn:oasis:names:specification:ubl:schema:xsd:Invoice-2","rootNodeName":"Invoice","archetype":"PEPPOL_BIS","documentType":"Invoice","documentBusinessIdentifier":"c4c937fc-a276-11e6-ab58-3b2f2bf0b8e7"}}'
    load_tests_last_rabbit: '{"version":1.1,"processingInfo":{"source":{"name":"transport-from-a2a","type":"OUT_FILE_TO_MQ"},"sourceMetadata":"Received by transport-from-a2a as /peppol-a2a-nfs/out/test/data/large-file-100MB.xml","route":{"endpoints":["validator","outbound","outbound:exchange=peppol-delayed,x-delay=30000","outbound:exchange=peppol-delayed,x-delay=30000"],"description":"A2A to Peppol","source":"transport-from-a2a","current":1},"currentEndpoint":{"name":"internal-routing","type":"OUT_ROUTING"},"currentStatus":"route set","attemptId":0,"eventingMessage":{"id":"OUT_large-file-100MB_transport-from-a2a","created":1518104313955,"isInbound":false,"attempts":[{"id":"1518104313955_large-file-100MB.xml","events":[{"id":1518104313955,"source":"transport-from-a2a","status":"received","terminal":false,"details":"Picked up file by transport"},{"id":1518104315575,"source":"preprocessing","status":"parsed","terminal":false,"details":"Preprocessing complete, sent to internal-routing"},{"id":1518104315666,"source":"internal-routing","status":"route set","terminal":false,"details":"Route set, sent to validator"}],"filename":"/peppol/data/storage/9908_987987987/9908_987987987/20180208/large-file-100MB.xml"}],"documentType":"Invoice","documentNumber":"2157563","documentDate":"2016-11-03","dueDate":"2016-12-03"}},"fileName":"{{ last_filename }}","originalFileName":"large-file-100MB","documentInfo":{"errors":[],"warnings":[],"senderId":"9908:987987987","recipientId":"9908:987987987","versionId":"2.1","documentId":"2157563","issueDate":"2016-11-03","issueTime":"","dueDate":"2016-12-03","senderName":"OpusCapita test","senderCountryCode":"NO","recipientName":"OpusCapita test","recipientCountryCode":"NO","profileId":"urn:www.cenbii.eu:profile:bii05:ver2.0","customizationId":"urn:www.cenbii.eu:transaction:biitrns010:ver2.0:extended:urn:www.peppol.eu:bis:peppol5a:ver2.0","rootNameSpace":"urn:oasis:names:specification:ubl:schema:xsd:Invoice-2","rootNodeName":"Invoice","archetype":"PEPPOL_BIS","documentType":"Invoice","documentBusinessIdentifier":"c4c937fc-a276-11e6-ab58-3b2f2bf0b8e7"}}'
...
